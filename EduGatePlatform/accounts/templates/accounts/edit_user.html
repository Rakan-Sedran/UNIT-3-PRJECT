{% extends "base.html" %}

{% block content %}

<div class="container mt-4">

  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="mb-0">
      <i class="fas fa-user-edit me-2"></i>
      Edit User â€“ {{ user_obj.username }}
    </h1>
    <a href="{% url 'accounts:manage_users' %}" class="btn btn-outline-secondary">
      <i class="fas fa-arrow-left me-1"></i> Back to Users
    </a>
  </div>

  <hr>

  <div class="card shadow-lg border-0">
    <div class="card-body p-4">

      {% if form.non_field_errors %}
        <div class="alert alert-danger">
          {{ form.non_field_errors }}
        </div>
      {% endif %}

      <form method="post">
        {% csrf_token %}

        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label fw-semibold" for="{{ form.username.id_for_label }}">
              {{ form.username.label }}
            </label>
            {{ form.username }}
            {% if form.username.errors %}
              <div class="text-danger small">
                {{ form.username.errors }}
              </div>
            {% endif %}
          </div>

          <div class="col-md-6 mb-3">
            <label class="form-label fw-semibold" for="{{ form.email.id_for_label }}">
              {{ form.email.label }}
            </label>
            {{ form.email }}
            {% if form.email.errors %}
              <div class="text-danger small">
                {{ form.email.errors }}
              </div>
            {% endif %}
          </div>
        </div>

        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label fw-semibold" for="{{ form.full_name.id_for_label }}">
              {{ form.full_name.label }}
            </label>
            {{ form.full_name }}
            {% if form.full_name.errors %}
              <div class="text-danger small">
                {{ form.full_name.errors }}
              </div>
            {% endif %}
          </div>

          <div class="col-md-6 mb-3">
            <label class="form-label fw-semibold" for="{{ form.national_id.id_for_label }}">
              {{ form.national_id.label }}
            </label>
            {{ form.national_id }}
            {% if form.national_id.errors %}
              <div class="text-danger small">
                {{ form.national_id.errors }}
              </div>
            {% endif %}
          </div>
        </div>

        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label fw-semibold" for="{{ form.role.id_for_label }}">
              {{ form.role.label }}
            </label>
            {{ form.role }}
            {% if form.role.errors %}
              <div class="text-danger small">
                {{ form.role.errors }}
              </div>
            {% endif %}
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-3">
            <div class="form-check">
              {{ form.is_active }}
              <label class="form-check-label fw-semibold" for="{{ form.is_active.id_for_label }}">
                {{ form.is_active.label }}
              </label>
            </div>
          </div>
        </div>

        <button type="submit" class="btn btn-primary">
          <i class="fas fa-save me-1"></i> Save changes
        </button>
        <a href="{% url 'accounts:manage_users' %}" class="btn btn-secondary ms-2">
          Cancel
        </a>

      </form>
    </div>
  </div>

</div>

{% endblock %}
