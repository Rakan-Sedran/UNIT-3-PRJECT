{% extends "base.html" %}

{% block content %}
<h1 class="mb-3">School Announcements Management</h1>

<a href="{% url 'main:add_announcement' %}" class="btn btn-primary mb-3">
    <i class="fas fa-plus-circle me-2"></i> Create New Announcement
</a>

<table class="table table-bordered table-hover bg-white shadow-sm">
    <thead class="table-light">
        <tr>
            <th>#</th>
            <th>Title</th>
            <th>Category</th>
            <th>Important</th>
            <th>Start</th>
            <th>End</th>
            <th>Created</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for ann in announcements %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ ann.title }}</td>
            <td>{{ ann.get_category_display }}</td>
            <td>
                {% if ann.is_important %}
                    <span class="badge bg-danger">Yes</span>
                {% else %}
                    <span class="badge bg-secondary">No</span>
                {% endif %}
            </td>
            <td>{{ ann.start_date|default:"—" }}</td>
            <td>{{ ann.end_date|default:"—" }}</td>
            <td>{{ ann.created_at|date:"Y-m-d" }}</td>
            <td>
                <a href="{% url 'main:announcement_update' ann.id %}" class="btn btn-sm btn-info">
                    Edit
                </a>
                <a href="{% url 'main:announcement_delete' ann.id %}" class="btn btn-sm btn-outline-danger">
                    Delete
                </a>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="8" class="text-center text-muted py-4">
                No announcements yet.
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
